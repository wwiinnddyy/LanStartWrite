<!-- setting_ui.html: settings modal fragment -->
<div id="settingsModal" class="settings-modal" role="dialog" aria-hidden="true">
  <div class="settings-backdrop"></div>
  <div class="settings-panel">
    <div class="settings-header">
      <h3>设置</h3>
      <button id="closeSettings" class="tool-btn">✕</button>
    </div>
    <div class="settings-body">
        <label><input type="checkbox" id="optAutoResize"> 自动调整工具栏宽度</label>
        <label><input type="checkbox" id="optCollapsed"> 启动时折叠工具栏</label>
        <label>主题
          <select id="optTheme">
            <option value="light">浅色</option>
            <option value="dark">深色</option>
          </select>
        </label>
        <label>视觉效果
          <select id="optVisualStyle">
            <option value="solid">实心</option>
            <option value="blur">模糊</option>
            <option value="transparent">透明</option>
          </select>
        </label>
        <label>画布颜色
          <select id="optCanvasColor">
            <option value="white">白色</option>
            <option value="black">黑色</option>
            <option value="chalkboard">黑板绿</option>
          </select>
        </label>
        <label><input type="checkbox" id="optTooltips"> 显示工具提示</label>
        <label><input type="checkbox" id="optMultiTouchPen"> 触摸多指书写</label>
        <fieldset style="border:1px solid #eee;padding:8px;border-radius:8px">
          <legend>批注</legend>
          <label>默认笔颜色 <input type="color" id="optAnnotationPenColor" value="#FF0000"></label>
        </fieldset>
        <fieldset style="border:1px solid #eee;padding:8px;border-radius:8px">
          <legend>智能功能</legend>
          <label><input type="checkbox" id="optSmartInk"> 图形与直线智能识别</label>
        </fieldset>
        <fieldset style="border:1px solid #eee;padding:8px;border-radius:8px">
          <legend>快捷键</legend>
          <label>撤销: <input id="keyUndo" type="text" placeholder="Ctrl+Z" maxlength="20"></label>
          <label>重做: <input id="keyRedo" type="text" placeholder="Ctrl+Y" maxlength="20"></label>
        </fieldset>
        <div style="padding-top:8px;display:flex;gap:8px;align-items:center">
          <button id="previewSettings">预览设置</button>
          <button id="revertPreview">撤销预览</button>
          <div id="historyStateDisplay" style="margin-left:auto;font-size:13px;color:#444">撤销: — 重做: —</div>
        </div>
      </div>
    <div class="settings-footer">
      <button id="resetSettings">重置为默认</button>
      <button id="saveSettings">保存</button>
    </div>
  </div>
</div>

<div id="aboutModal" class="settings-modal" role="dialog" aria-hidden="true">
  <div class="settings-backdrop"></div>
  <div class="settings-panel">
    <div class="settings-header">
      <h3>关于</h3>
      <button id="closeAbout" class="tool-btn">✕</button>
    </div>
    <div class="settings-body" style="text-align:center">
      <div style="padding:12px 8px">
        <div style="font-size:18px;font-weight:700">LanStartWrite</div>
        <div style="padding-top:6px;color:#555">揽星书写</div>
      </div>
    </div>
  </div>
</div>

<div id="pluginModal" class="settings-modal" role="dialog" aria-hidden="true" aria-label="插件管理">
  <div class="settings-backdrop"></div>
  <div class="settings-panel plugin-panel">
    <div class="settings-header">
      <h3>插件管理</h3>
      <button id="closePluginModal" class="tool-btn" aria-label="关闭">✕</button>
    </div>
    <div class="settings-body plugin-body">
      <div class="plugin-install-row">
        <input id="pluginFileInput" type="file" accept=".lanmod" style="display:none" />
        <button id="pluginInstallBtn" class="mode-btn">安装插件</button>
        <button id="pluginRefreshBtn" class="mode-btn">刷新</button>
        <div id="pluginInstallStatus" class="plugin-status" aria-live="polite"></div>
      </div>
      <div id="pluginDropZone" class="plugin-drop" tabindex="0" role="button" aria-label="拖放或选择插件安装">
        <div class="plugin-drop-title">拖放 .lanmod 到这里安装</div>
        <div class="plugin-drop-sub">或点击“安装插件”选择文件</div>
        <progress id="pluginInstallProgress" value="0" max="100" class="plugin-progress" aria-label="安装进度"></progress>
      </div>
      <div class="plugin-list-head">
        <div>已安装插件</div>
        <div class="plugin-list-hint">拖动排序</div>
      </div>
      <div id="pluginList" class="plugin-list" role="list"></div>
    </div>
  </div>
</div>
